services:
  photon:
    image: 'ghcr.io/rtuszik/photon-docker:latest'
    container_name: "photon-docker"
    environment:
      - COUNTRY_CODE=de
      - UPDATE_STRATEGY=DISABLED
      - UPDATE_INTERVAL=720h
      - LOG_LEVEL=INFO
    volumes:
      - photon_data:/photon/photon_data
    restart: unless-stopped
    labels:  # <- Hier fehlte die richtige Einrückung!
      # CORS Labels:
      - traefik.http.middlewares.cors.headers.accesscontrolallowmethods=GET,OPTIONS,PUT,POST,DELETE
      - traefik.http.middlewares.cors.headers.accesscontrolalloworigin=*
      - traefik.http.middlewares.cors.headers.accesscontrolmaxage=100
      - traefik.http.middlewares.cors.headers.addvaryheader=true
      - traefik.http.middlewares.cors.headers.accesscontrolallowheaders=*
      # WICHTIG: cors zu den Middlewares hinzufügen:
      - traefik.http.routers.photon.middlewares=cors

volumes:
  photon_data:
